jQuery(function(e){function c(c){c?(e("#cm-create").removeAttr("disabled"),e("#cm-cancel").removeAttr("disabled")):(e("#cm-create").attr("disabled","disabled"),e("#cm-cancel").attr("disabled","disabled"))}function t(e){return e.val(e.val().replace(/\s{1,}/g,"")),""==e.val()?!1:!0}function a(c){"undefined"!=typeof c.success?(s(),c.success?(e("#cm-ctheme").append(c.data.stylesheet),e("#cm-preview").attr("href",e("#cm-preview").attr("href")+c.data.stylesheet)):n(c.data.message),e("#cm-success").css("display","block")):c.indexOf("<form")>-1?(r(),e("#cm-form-container").append('<div id="ftp-form">'+c+"</div>"),d("#ftp-form"),e("#childify-container input#upgrade").click(function(c){c.preventDefault(),e(this).attr("disabled","disabled"),i()})):(s(),n(c),e("#cm-success").css("display","block"))}function n(c){e("#cm-success > p").text(c?c:"Error"),e("#cm-success").removeClass("updated"),e("#cm-success").addClass("error"),e("#cm-success #cm-preview").detach()}function i(){u+="&"+e("#childify-container form").serialize(),e.post(h,u,function(e){a(e)})}function s(){e("#cm-form-container").detach(),e("#cm-add-new").detach(),e("#cm-info").detach()}function r(){e("#ftp-form").length>0&&e("#ftp-form").detach()}function d(c){var t=parseInt(e(c).offset().top)-parseInt(e(".wp-full-overlay-sidebar-content").offset().top)+parseInt(e(".wp-full-overlay-sidebar-content").scrollTop());e(".wp-full-overlay-sidebar-content").animate({scrollTop:t},700)}var o=e("#customize-info").parent(),l=_.template(e("script#childify-tpl").html()),m="action="+CMAdmin.Action,f="CMnonce="+CMAdmin.CMnonce,p="parent="+CMAdmin.Parent,u=m+"&"+f+"&"+p,h=CMAdmin.AjaxUrl;o.append(l()),e("#cm-add-new").click(function(){e(this).toggleClass("open"),e("#cm-form-container").slideToggle("fast")}),e("#cm-cancel").click(function(){e(this).attr("disabled")||(e("#cm-cname").removeAttr("readonly"),e("#cm-create").removeAttr("disabled"),e("#cm-cname").val(""),r(),c(t(e("#cm-cname"))))}),e("#cm-create").click(function(){e(this).attr("disabled")||t(e("#cm-cname"))&&(e(this).attr("disabled","disabled"),e("#cm-cname").attr("readonly","readonly"),i())}),e("#cm-cname").on("keyup blur",function(){c(t(e(this)))}),e(document).ready(function(e){c(!1),e("#childify-container").css("display","block")})});
