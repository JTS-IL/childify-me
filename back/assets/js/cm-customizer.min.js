jQuery(function(e){function a(){if(e("#cm-cname").val()=="")return false;return true}function f(t){if(typeof t.success!="undefined"){h();if(t.success){e("#cm-ctheme").append(t.data.stylesheet);e("#cm-preview").attr("href",e("#cm-preview").attr("href")+t.data.stylesheet)}else{l(t.data.message)}e("#cm-success").css("display","block")}else{if(t.indexOf("<form")>-1){p();e("#cm-form-container").append('<div id="ftp-form">'+t+"</div>");d("#ftp-form");e("#childify-container input#upgrade").click(function(t){t.preventDefault();e(this).attr("disabled","disabled");c()})}else{h();l(t);e("#cm-success").css("display","block")}}}function l(t){e("#cm-success > p").text(t?t:"Error");e("#cm-success").removeClass("updated");e("#cm-success").addClass("error");e("#cm-success #cm-preview").detach()}function c(){o+="&"+e("#childify-container form").serialize();e.post(u,o,function(e){f(e)})}function h(){e("#cm-form-container").detach();e("#cm-add-new").detach();e("#cm-info").detach()}function p(){if(e("#ftp-form").length>0){e("#ftp-form").detach()}}function d(t){var n=parseInt(e(t).offset().top)-parseInt(e(".wp-full-overlay-sidebar-content").offset().top)+parseInt(e(".wp-full-overlay-sidebar-content").scrollTop());e(".wp-full-overlay-sidebar-content").animate({scrollTop:n},700)}var t=e("#customize-info").parent(),n=_.template(e("script#childify-tpl").html()),r="action="+CMAdmin.Action,i="CMnonce="+CMAdmin.CMnonce,s="parent="+CMAdmin.Parent,o=r+"&"+i+"&"+s,u=CMAdmin.AjaxUrl;t.append(n());e("#cm-add-new").click(function(){e("#cm-form-container").slideToggle("fast")});e("#cm-cancel").click(function(){e("#cm-cname").removeAttr("readonly");e("#cm-create").removeAttr("disabled");e("#cm-cname").val("");p()});e("#cm-create").click(function(){if(!a())return;e(this).attr("disabled","disabled");e("#cm-cname").attr("readonly","readonly");c()});e(document).ready(function(e){e("#childify-container").css("display","block")})})
