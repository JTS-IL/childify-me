jQuery(function(e){function c(c){c?(e("#cm-create").removeAttr("disabled"),e("#cm-cancel").removeAttr("disabled")):(e("#cm-create").attr("disabled","disabled"),e("#cm-cancel").attr("disabled","disabled"))}function t(c,t){return c.val(t?e.trim(c.val()):c.val().replace(/^\s+/g,"")),""==c.val()?!1:!0}function a(c){"undefined"!=typeof c.success?(c.success?(e("#cm-ctheme").append(e("#cm-cname").val()),e("#cm-preview").attr("href",e("#cm-preview").attr("href")+c.data.stylesheet)):n(c.data.message),r(),e("#cm-success").css("display","block")):c.indexOf("<form")>-1?(o(),e("#cm-form-container").append('<div id="ftp-form">'+c+"</div>"),s("#ftp-form"),e("#childify-container input#upgrade").click(function(c){c.preventDefault(),e(this).attr("disabled","disabled"),i()})):(r(),n(c),e("#cm-success").css("display","block"))}function n(c){e("#cm-success > p").text(c?c:"Error"),e("#cm-success").removeClass("updated"),e("#cm-success").addClass("error"),e("#cm-success #cm-preview").detach()}function i(){u+="&"+e("#childify-container form").serialize(),e.post(y,u,function(e){a(e)})}function r(){e("#cm-form-container").detach(),e("#cm-add-new").detach(),e("#cm-info").detach()}function o(){e("#ftp-form").length>0&&e("#ftp-form").detach()}function s(c){var t=parseInt(e(c).offset().top)-parseInt(e(".wp-full-overlay-sidebar-content").offset().top)+parseInt(e(".wp-full-overlay-sidebar-content").scrollTop());e(".wp-full-overlay-sidebar-content").animate({scrollTop:t},700)}var d=e("#customize-info").parent(),l=_.template(e("script#childify-tpl").html()),m="action="+CMAdmin.Action,f="CMnonce="+CMAdmin.CMnonce,p="parent="+CMAdmin.Parent,u=m+"&"+f+"&"+p,y=CMAdmin.AjaxUrl;d.append(l()),e("#cm-add-new").click(function(){e(this).toggleClass("open"),e("#cm-form-container").slideToggle("fast"),e("#cm-cname").attr("readonly")||e("#cm-cname").focus()}),e("#cm-cancel").click(function(){e(this).attr("disabled")||(e("#cm-cname").removeAttr("readonly"),e("#cm-create").removeAttr("disabled"),e("#cm-cname").val(""),o(),c(t(e("#cm-cname"))))}),e("#cm-create").click(function(){e(this).attr("disabled")||t(e("#cm-cname"),!0)&&(e(this).attr("disabled","disabled"),e("#cm-cname").attr("readonly","readonly"),i())}),e("#cm-cname").on("keyup blur",function(a){if(a.keyCode){if(console.log(a.keyCode),a.keyCode>34&&a.keyCode<41||16==a.keyCode)return;if(13==a.keyCode)return void e("#cm-create").trigger("click")}c(t(e(this)))}),e(document).ready(function(e){c(!1),e("#childify-container").css("display","block")})});
